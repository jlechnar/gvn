
################################################
# setup: Setup branch_worktree
.../test_branch_worktree

################################################
# setup: create local repository (file system repository) server1
.../test_branch_worktree/server1

################################################
# setup: create local / sandbox repository
.../test_branch_worktree/server1_create

 .============================================================================
 | Executing:  svn checkout file://.../test_branch_worktree/server1/repo .
 |============================================================================
Checked out revision 0.
 '============================================================================

A         trunk
A         branches
A         tags
A         .svnignore
Adding         branches
Adding         tags
Adding         trunk
Adding         trunk/.svnignore
Transmitting file data .done
Committing transaction...
Committed revision 1.

################################################
# setup: 

################################################
# setup: create local / sandbox repository for user1
.../test_branch_worktree/svn_user1

 .============================================================================
 | Executing:  svn checkout file://.../test_branch_worktree/server1/repo/trunk .
 |============================================================================
A    .svnignore
Checked out revision 1.
 '============================================================================


################################################
# setup: create local / sandbox repository for user1
.../test_branch_worktree/git_user2

 .============================================================================
 | Executing:  .../../bin/gvn.sh clone file://.../test_branch_worktree/server1/repo/trunk .
 |============================================================================
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint: 	git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint: 	git branch -m <name>
Initialized empty Git repository in .../test_branch_worktree/git_user2/.git/
	A	.svnignore
r1 = <HASH> (refs/remotes/origin/trunk)
Checked out HEAD:
  file://.../test_branch_worktree/server1/repo/trunk r1
 '============================================================================


 .============================================================================
 |             Rename master to trunk to match name for gvn
 | Executing:  .../../bin/git.sh branch -m trunk
 |============================================================================
 '============================================================================


 .============================================================================
 |             update map database
 | Executing:  .../../bin/gvn.sh umdb
 |============================================================================
 '============================================================================


################################################
# setup: create local / sandbox repository for user1
.../test_branch_worktree/git_user3

 .============================================================================
 | Executing:  .../../bin/gvn.sh clone-ns file://.../test_branch_worktree/server1/repo/trunk .
 |============================================================================
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint: 	git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint: 	git branch -m <name>
Initialized empty Git repository in .../test_branch_worktree/git_user3/.git/
	A	.svnignore
r1 = <HASH> (refs/remotes/git-svn)
Checked out HEAD:
  file://.../test_branch_worktree/server1/repo/trunk r1
 '============================================================================


 .============================================================================
 |             Rename master to trunk to match name for gvn
 | Executing:  .../../bin/git.sh branch -m trunk
 |============================================================================
 '============================================================================


 .============================================================================
 |             update map database
 | Executing:  .../../bin/gvn.sh umdb
 |============================================================================
 '============================================================================


 .============================================================================
 |             add some files
 | Executing:  .../../bin/git.sh add file* test1/*
 |============================================================================
 '============================================================================


 .============================================================================
 |             commit new files
 | Executing:  .../../bin/git.sh commit -m 'files'
 |============================================================================
[trunk  <HASH>] files
 6 files changed, 30 insertions(+)
 create mode 100644 file.html
 create mode 100644 file.pl
 create mode 100644 file.py
 create mode 100644 test1/file1.html
 create mode 100644 test1/file1.pl
 create mode 100644 test1/file1.py
 '============================================================================


 .============================================================================
 |             push to svn
 | Executing:  .../../bin/gvn.sh uc
 |============================================================================
Created Tag gvn_rebase_<DATE>_<TIME>_git_<HASH>_to_svn_<HASH>
Current branch trunk is up to date.
Committing to file://.../test_branch_worktree/server1/repo/trunk ...
	A	file.html
	A	file.pl
	A	file.py
	A	test1/file1.html
	A	test1/file1.pl
	A	test1/file1.py
Committed r2
	A	file.html
	A	file.pl
	A	file.py
	A	test1/file1.html
	A	test1/file1.pl
	A	test1/file1.py
r2 = <HASH> (refs/remotes/origin/trunk)
No changes between <HASH> and refs/remotes/origin/trunk
Resetting to the latest refs/remotes/origin/trunk
 '============================================================================


 .============================================================================
 |             get worktree path for trunk worktree
 | Executing:  wt_trunk=`.../../bin/gvn.sh wg trunk`
 |============================================================================
 '============================================================================


 .============================================================================
 |             create worktree from branch trunk to test1
 | Executing:  .../../bin/gvn.sh wa test1
 |============================================================================
Preparing worktree (new branch 'test1')
HEAD is now at <HASH> files
 '============================================================================


 .============================================================================
 |             create gvn branch test
 | Executing:  .../../bin/gvn.sh branch test
 |============================================================================
Copying file://.../test_branch_worktree/server1/repo/trunk at r2 to file://.../test_branch_worktree/server1/repo/branches/test...
Found possible branch point: file://.../test_branch_worktree/server1/repo/trunk => file://.../test_branch_worktree/server1/repo/branches/test, 2
Found branch parent: (refs/remotes/origin/test) <HASH>
Following parent with do_switch
Successfully followed parent
r3 = <HASH> (refs/remotes/origin/test)
Switched to a new branch 'test'
 '============================================================================


 .============================================================================
 |             get worktree path for test worktree
 | Executing:  wt_test=`.../../bin/gvn.sh wg test`
 |============================================================================
 '============================================================================


 .============================================================================
 |             create worktree from branch test to test2
 | Executing:  .../../bin/gvn.sh wa test2
 |============================================================================
Preparing worktree (new branch 'test2')
HEAD is now at <HASH> Created branch test
 '============================================================================


 .============================================================================
 |             get worktree path for test2 worktree
 | Executing:  wt_test2=`.../../bin/gvn.sh wg test2`
 |============================================================================
 '============================================================================


 .============================================================================
 |             change to test2
 | Executing:  cd .../test_branch_worktree/test2
 |============================================================================
 '============================================================================


 .============================================================================
 |             try to create worktree in worktree not svn branch
 | Executing:  .../../bin/gvn.sh wa test3
 |============================================================================
ERROR: Branch is not a real svn branch as branch name does not match svn remote branch name: <test2> != <test>. Aborting operation.
 '============================================================================


 .============================================================================
 |             change on test2 worktree
 | Executing:  .../../bin/git.sh commit -a -m 'wt_test2_change'
 |============================================================================
[test2  <HASH>] wt_test2_change
 1 file changed, 1 insertion(+), 1 deletion(-)
 '============================================================================


 .============================================================================
 |             change to test
 | Executing:  cd .../test_branch_worktree/git_user2
 |============================================================================
 '============================================================================


 .============================================================================
 |             sync worktree failing due to missing branch name and auto detect fails
 | Executing:  .../../bin/gvn.sh ws
 |============================================================================
ERROR: Master worktree detected / Could not detect base to sync. Candidates are:
 test2
 '============================================================================


 .============================================================================
 |             change on test worktree
 | Executing:  .../../bin/git.sh commit -a -m 'wt_test_change'
 |============================================================================
[test  <HASH>] wt_test_change
 1 file changed, 1 insertion(+), 1 deletion(-)
 '============================================================================


 .============================================================================
 |             change to test2
 | Executing:  cd .../test_branch_worktree/test2
 |============================================================================
 '============================================================================


 .============================================================================
 |             sync worktree from test to test2 (rebase)
 | Executing:  .../../bin/gvn.sh ws
 |============================================================================
INFO: Auto-detected branch to sync to be <test>.
INFO: try to sync via rebase <test2> onto <test> for svn base <test>.
INFO: detected current branch <test2> to base upon branch to sync <test>.
INFO: rebasing current branch <test2> onto branch to sync <test>.
Created Tag for git rebase: gvn_worktree_rebase_<DATE>_<TIME>_2_<HASH>_to_t_<HASH>
Rebasing (1/1)[KSuccessfully rebased and updated refs/heads/test2.
 '============================================================================


 .============================================================================
 |             change to test
 | Executing:  cd .../test_branch_worktree/git_user2
 |============================================================================
 '============================================================================


 .============================================================================
 |             sync worktree from test2 to test (merge)
 | Executing:  .../../bin/gvn.sh ws test2
 |============================================================================
INFO: try to sync via merge <test2> into <test> for svn base <test>.
INFO: detected current branch <test> to be base for branch to sync <test2>.
INFO: merging branch to sync <test2> into current branch <test>.
Created Tag for git merge: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_2_<HASH>
Updating <HASH>..<HASH>
Fast-forward
 file.py | 2 [34;102m+[m[34;101m-[m
 1 file changed, 1 insertion(+), 1 deletion(-)
 '============================================================================


 .============================================================================
 |             sync worktree from test1 to test (abort due to wrong base tree)
 | Executing:  .../../bin/gvn.sh ws test1
 |============================================================================
INFO: try to sync via merge <test1> into <test> for svn base <test>.
ERROR: Detected missmatch in svn base branch <trunk> (<test1>) != <test> (test). Aborted sync (merge) of <test1> into <test>.
 '============================================================================


 .============================================================================
 |             change to test test1 subfolder
 | Executing:  cd .../test_branch_worktree/git_user2/test1
 |============================================================================
 '============================================================================


 .============================================================================
 |             create worktree from branch test to test5
 | Executing:  .../../bin/gvn.sh wa test5
 |============================================================================
Preparing worktree (new branch 'test5')
HEAD is now at <HASH> wt_test2_change
 '============================================================================


 .============================================================================
 |             get worktree path for test5 worktree
 | Executing:  wt_test5=`.../../bin/gvn.sh wg test5`
 |============================================================================
 '============================================================================


 .============================================================================
 |             change on test worktree
 | Executing:  .../../bin/git.sh commit -a -m 'wt_test_change'
 |============================================================================
[test  <HASH>] wt_test_change
 1 file changed, 2 insertions(+), 2 deletions(-)
 '============================================================================


 .============================================================================
 |             change to test5 test1 subfolder
 | Executing:  cd .../test_branch_worktree/test5/test1
 |============================================================================
 '============================================================================


 .============================================================================
 |             sync worktree from test to test5 (rebase)
 | Executing:  .../../bin/gvn.sh ws test
 |============================================================================
INFO: try to sync via rebase <test5> onto <test> for svn base <test>.
INFO: detected current branch <test5> to base upon branch to sync <test>.
INFO: rebasing current branch <test5> onto branch to sync <test>.
Created Tag for git rebase: gvn_worktree_rebase_<DATE>_<TIME>_5_<HASH>_to_t_<HASH>
[KSuccessfully rebased and updated refs/heads/test5.
 '============================================================================


 .============================================================================
 |             change on test5 worktree
 | Executing:  .../../bin/git.sh commit -a -m 'wt_test5_change'
 |============================================================================
[test5  <HASH>] wt_test5_change
 1 file changed, 2 insertions(+), 2 deletions(-)
 '============================================================================


 .============================================================================
 |             change to test test1 subfolder
 | Executing:  cd .../test_branch_worktree/git_user2/test1
 |============================================================================
 '============================================================================


 .============================================================================
 |             sync worktree from test5 to test (merge)
 | Executing:  .../../bin/gvn.sh ws test5
 |============================================================================
INFO: try to sync via merge <test5> into <test> for svn base <test>.
INFO: detected current branch <test> to be base for branch to sync <test5>.
INFO: merging branch to sync <test5> into current branch <test>.
Created Tag for git merge: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_5_<HASH>
Updating <HASH>..<HASH>
Fast-forward
 test1/file1.html | 4 [34;102m++[m[34;101m--[m
 1 file changed, 2 insertions(+), 2 deletions(-)
 '============================================================================


 .============================================================================
 |             change to test
 | Executing:  cd .../test_branch_worktree/git_user2
 |============================================================================
 '============================================================================


 .============================================================================
 |             log with svn revisions
 | Executing:  .../../bin/git.sh lgasb
 |============================================================================
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test5_change[m [1;35m (HEAD -> test, test5)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_5_<HASH>)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_5_<HASH>_to_t_<HASH>, test2)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_2_<HASH>)[m
[31m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_2_<HASH>_to_t_<HASH>)[m
[31m|[m[31m/[m  
* [33m     <HASH>[m [1;34mr3[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mCreated branch test[m [1;35m (origin/test)[m
* [33m     <HASH>[m [1;34mr2[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mfiles[m [1;35m (origin/trunk, trunk, test1)[m
[32m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mfiles[m [1;35m (tag: gvn_rebase_<DATE>_<TIME>_git_<HASH>_to_svn_<HASH>)[m
[32m|[m[32m/[m  
* [33m     <HASH>[m [1;34mr1[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30minitial commit[m [1;35m[m
 '============================================================================


 .============================================================================
 |             change to test
 | Executing:  cd .../test_branch_worktree/git_user2
 |============================================================================
 '============================================================================


 .============================================================================
 |             create worktree from branch trunk to test4
 | Executing:  .../../bin/gvn.sh wa test4
 |============================================================================
Preparing worktree (new branch 'test4')
HEAD is now at <HASH> wt_test5_change
 '============================================================================


 .============================================================================
 |             log with svn revisions
 | Executing:  .../../bin/git.sh lgasb
 |============================================================================
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test5_change[m [1;35m (HEAD -> test, test5, test4)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_5_<HASH>)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_5_<HASH>_to_t_<HASH>, test2)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_2_<HASH>)[m
[31m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_2_<HASH>_to_t_<HASH>)[m
[31m|[m[31m/[m  
* [33m     <HASH>[m [1;34mr3[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mCreated branch test[m [1;35m (origin/test)[m
* [33m     <HASH>[m [1;34mr2[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mfiles[m [1;35m (origin/trunk, trunk, test1)[m
[32m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mfiles[m [1;35m (tag: gvn_rebase_<DATE>_<TIME>_git_<HASH>_to_svn_<HASH>)[m
[32m|[m[32m/[m  
* [33m     <HASH>[m [1;34mr1[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30minitial commit[m [1;35m[m
 '============================================================================


 .============================================================================
 |             list worktrees
 | Executing:  .../../bin/gvn.sh wl
 |============================================================================
.../test_branch_worktree/git_user2  <HASH> [test]
.../test_branch_worktree/test1      <HASH> [test1]
.../test_branch_worktree/test2      <HASH> [test2]
.../test_branch_worktree/test4      <HASH> [test4]
.../test_branch_worktree/test5      <HASH> [test5]
 '============================================================================


 .============================================================================
 |             delete worktree test4
 | Executing:  .../../bin/gvn.sh wd test4
 |============================================================================
 '============================================================================


 .============================================================================
 |             log with svn revisions
 | Executing:  .../../bin/git.sh lgasb
 |============================================================================
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test5_change[m [1;35m (HEAD -> test, test5, test4)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_5_<HASH>)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_5_<HASH>_to_t_<HASH>, test2)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_2_<HASH>)[m
[31m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_2_<HASH>_to_t_<HASH>)[m
[31m|[m[31m/[m  
* [33m     <HASH>[m [1;34mr3[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mCreated branch test[m [1;35m (origin/test)[m
* [33m     <HASH>[m [1;34mr2[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mfiles[m [1;35m (origin/trunk, trunk, test1)[m
[32m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mfiles[m [1;35m (tag: gvn_rebase_<DATE>_<TIME>_git_<HASH>_to_svn_<HASH>)[m
[32m|[m[32m/[m  
* [33m     <HASH>[m [1;34mr1[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30minitial commit[m [1;35m[m
 '============================================================================


 .============================================================================
 |             list worktrees
 | Executing:  .../../bin/gvn.sh wl
 |============================================================================
.../test_branch_worktree/git_user2  <HASH> [test]
.../test_branch_worktree/test1      <HASH> [test1]
.../test_branch_worktree/test2      <HASH> [test2]
.../test_branch_worktree/test5      <HASH> [test5]
 '============================================================================


 .============================================================================
 |             delete worktree test2
 | Executing:  .../../bin/gvn.sh wd test2
 |============================================================================
 '============================================================================


 .============================================================================
 |             log with svn revisions
 | Executing:  .../../bin/git.sh lgasb
 |============================================================================
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test5_change[m [1;35m (HEAD -> test, test5, test4)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_5_<HASH>)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_5_<HASH>_to_t_<HASH>, test2)[m
* [33m     <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test_change[m [1;35m (tag: gvn_worktree_merge_<DATE>_<TIME>_t_<HASH>_to_2_<HASH>)[m
[31m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mwt_test2_change[m [1;35m (tag: gvn_worktree_rebase_<DATE>_<TIME>_2_<HASH>_to_t_<HASH>)[m
[31m|[m[31m/[m  
* [33m     <HASH>[m [1;34mr3[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mCreated branch test[m [1;35m (origin/test)[m
* [33m     <HASH>[m [1;34mr2[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30mfiles[m [1;35m (origin/trunk, trunk, test1)[m
[32m|[m * [33m   <HASH>[m [1;34mr?[m [1;32m<DATE> <TIME>[m [2;34muser2           [m [30mfiles[m [1;35m (tag: gvn_rebase_<DATE>_<TIME>_git_<HASH>_to_svn_<HASH>)[m
[32m|[m[32m/[m  
* [33m     <HASH>[m [1;34mr1[m [1;32m<DATE> <TIME>[m [2;34m<user>         [m [30minitial commit[m [1;35m[m
 '============================================================================


 .============================================================================
 |             list worktrees
 | Executing:  .../../bin/gvn.sh wl
 |============================================================================
.../test_branch_worktree/git_user2  <HASH> [test]
.../test_branch_worktree/test1      <HASH> [test1]
.../test_branch_worktree/test5      <HASH> [test5]
 '============================================================================

